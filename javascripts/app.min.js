/* lightbox.js

Lightbox v2.51
by Lokesh Dhakar - http://www.lokeshdhakar.com

For more information, visit:
http://lokeshdhakar.com/projects/lightbox2/

Licensed under the Creative Commons Attribution 2.5 License - http://creativecommons.org/licenses/by/2.5/
- free for use in both personal and commercial projects
- attribution requires leaving author name, author link, and the license info intact
	
Thanks
- Scott Upton(uptonic.com), Peter-Paul Koch(quirksmode.com), and Thomas Fuchs(mir.aculo.us) for ideas, libs, and snippets.
- Artemy Tregubenko (arty.name) for cleanup and help in updating to latest proto-aculous in v2.05. */
(function(){var a,k;a=jQuery;k=function(){this.fileLoadingImage="images/lightbox/loading.gif";this.fileCloseImage="images/lightbox/close.png";this.resizeDuration=700;this.fadeDuration=500;this.labelImage="Image";this.labelOf="of"};var d=function(a){this.options=a;this.album=[];this.currentImageIndex=void 0;this.init()};d.prototype.init=function(){this.enable();return this.build()};d.prototype.enable=function(){var b=this;return a("body").on("click","a[rel^=lightbox], area[rel^=lightbox]",function(c){b.start(a(c.currentTarget));return!1})};d.prototype.build=function(){var b,c=this;a("<div>",{id:"lightboxOverlay"}).after(a("<div/>",{id:"lightbox"}).append(a("<div/>",{"class":"lb-outerContainer"}).append(a("<div/>",{"class":"lb-container"}).append(a("<img/>",{"class":"lb-image"}),a("<div/>",{"class":"lb-nav"}).append(a("<a/>",{"class":"lb-prev"}),a("<a/>",{"class":"lb-next"})),a("<div/>",{"class":"lb-loader"}).append(a("<a/>",{"class":"lb-cancel"}).append(a("<img/>",{src:this.options.fileLoadingImage}))))),a("<div/>",{"class":"lb-dataContainer"}).append(a("<div/>",{"class":"lb-data"}).append(a("<div/>",{"class":"lb-details"}).append(a("<span/>",{"class":"lb-caption"}),a("<span/>",{"class":"lb-number"})),a("<div/>",{"class":"lb-closeContainer"}).append(a("<a/>",{"class":"lb-close"}).append(a("<img/>",{src:this.options.fileCloseImage}))))))).appendTo(a("body"));a("#lightboxOverlay").hide().on("click",function(){c.end();return!1});b=a("#lightbox");b.hide().on("click",function(b){"lightbox"===a(b.target).attr("id")&&c.end();return!1});b.find(".lb-outerContainer").on("click",function(b){"lightbox"===a(b.target).attr("id")&&c.end();return!1});b.find(".lb-prev").on("click",function(){c.changeImage(c.currentImageIndex-1);return!1});b.find(".lb-next").on("click",function(){c.changeImage(c.currentImageIndex+1);return!1});b.find(".lb-loader, .lb-close").on("click",function(){c.end();return!1})};d.prototype.start=function(b){var c,l,e,d,h;a(window).on("resize",this.sizeOverlay);a("select, object, embed").css({visibility:"hidden"});a("#lightboxOverlay").width(a(document).width()).height(a(document).height()).fadeIn(this.options.fadeDuration);this.album=[];e=0;if("lightbox"===b.attr("rel"))this.album.push({link:b.attr("href"),title:b.attr("title")});else{h=a(b.prop("tagName")+'[rel="'+b.attr("rel")+'"]');l=0;for(d=h.length;l<d;l++)c=h[l],this.album.push({link:a(c).attr("href"),title:a(c).attr("title")}),a(c).attr("href")===b.attr("href")&&(e=l)}c=a(window);b=c.scrollTop()+c.height()/10;c=c.scrollLeft();a("#lightbox").css({top:b+"px",left:c+"px"}).fadeIn(this.options.fadeDuration);this.changeImage(e)};d.prototype.changeImage=function(b){var c,d,e,f=this;this.disableKeyboardNav();d=a("#lightbox");c=d.find(".lb-image");this.sizeOverlay();a("#lightboxOverlay").fadeIn(this.options.fadeDuration);a(".loader").fadeIn("slow");d.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide();d.find(".lb-outerContainer").addClass("animating");e=new Image;e.onload=function(){c.attr("src",f.album[b].link);c.width=e.width;c.height=e.height;return f.sizeContainer(e.width,e.height)};e.src=this.album[b].link;this.currentImageIndex=b};d.prototype.sizeOverlay=function(){return a("#lightboxOverlay").width(a(document).width()).height(a(document).height())};d.prototype.sizeContainer=function(b,c){var d,e,f,h,k,p,g,j,m,n,q=this;e=a("#lightbox");f=e.find(".lb-outerContainer");n=f.outerWidth();m=f.outerHeight();d=e.find(".lb-container");p=parseInt(d.css("padding-top"),10);k=parseInt(d.css("padding-right"),10);h=parseInt(d.css("padding-bottom"),10);d=parseInt(d.css("padding-left"),10);j=b+d+k;g=c+p+h;j!==n&&g!==m?f.animate({width:j,height:g},this.options.resizeDuration,"swing"):j!==n?f.animate({width:j},this.options.resizeDuration,"swing"):g!==m&&f.animate({height:g},this.options.resizeDuration,"swing");setTimeout(function(){e.find(".lb-dataContainer").width(j);e.find(".lb-prevLink").height(g);e.find(".lb-nextLink").height(g);q.showImage()},this.options.resizeDuration)};d.prototype.showImage=function(){var b;b=a("#lightbox");b.find(".lb-loader").hide();b.find(".lb-image").fadeIn("slow");this.updateNav();this.updateDetails();this.preloadNeighboringImages();this.enableKeyboardNav()};d.prototype.updateNav=function(){var b;b=a("#lightbox");b.find(".lb-nav").show();0<this.currentImageIndex&&b.find(".lb-prev").show();this.currentImageIndex<this.album.length-1&&b.find(".lb-next").show()};d.prototype.updateDetails=function(){var b,c=this;b=a("#lightbox");"undefined"!==typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&b.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast");1<this.album.length?b.find(".lb-number").html(this.options.labelImage+" "+(this.currentImageIndex+1)+" "+this.options.labelOf+"  "+this.album.length).fadeIn("fast"):b.find(".lb-number").hide();b.find(".lb-outerContainer").removeClass("animating");b.find(".lb-dataContainer").fadeIn(this.resizeDuration,function(){return c.sizeOverlay()})};d.prototype.preloadNeighboringImages=function(){var a;this.album.length>this.currentImageIndex+1&&(a=new Image,a.src=this.album[this.currentImageIndex+1].link);0<this.currentImageIndex&&(a=new Image,a.src=this.album[this.currentImageIndex-1].link)};d.prototype.enableKeyboardNav=function(){a(document).on("keyup.keyboard",a.proxy(this.keyboardAction,this))};d.prototype.disableKeyboardNav=function(){a(document).off(".keyboard")};d.prototype.keyboardAction=function(a){var c;c=a.keyCode;a=String.fromCharCode(c).toLowerCase();27===c||a.match(/x|o|c/)?this.end():"p"===a||37===c?0!==this.currentImageIndex&&this.changeImage(this.currentImageIndex-1):("n"===a||39===c)&&this.currentImageIndex!==this.album.length-1&&this.changeImage(this.currentImageIndex+1)};d.prototype.end=function(){this.disableKeyboardNav();a(window).off("resize",this.sizeOverlay);a("#lightbox").fadeOut(this.options.fadeDuration);a("#lightboxOverlay").fadeOut(this.options.fadeDuration);return a("select, object, embed").css({visibility:"visible"})};a(function(){var a;a=new k;return new d(a)})}).call(this);
/* tabletop.js */
(function(global){if(!Array.prototype.indexOf)Array.prototype.indexOf=function(obj,fromIndex){if(fromIndex==null)fromIndex=0;else if(fromIndex<0)fromIndex=Math.max(0,this.length+fromIndex);for(var i=fromIndex,j=this.length;i<j;i++)if(this[i]===obj)return i;return-1};var Tabletop=global.Tabletop=function(options){if(!this||!(this instanceof Tabletop))return new Tabletop(options);if(typeof options=="string")options={key:options};this.callback=options.callback;this.wanted=options.wanted||[];this.key=options.key;this.simpleSheet=!!options.simpleSheet;this.parseNumbers=!!options.parseNumbers;this.wait=!!options.wait;this.postProcess=options.postProcess;this.debug=!!options.debug;this.query=options.query||"";if(/key=/.test(this.key)){this.log("You passed a key as a URL! Attempting to parse.");this.key=this.key.match("key=(.*?)&")[1]}if(!this.key){alert("You need to pass Tabletop a key!");return}this.log("Initializing with key "+this.key);this.models={};this.model_names=[];this.base_json_url="https://spreadsheets.google.com/feeds/worksheets/"+this.key+"/public/basic?alt=json-in-script";if(!this.wait)this.fetch()};Tabletop.callbacks={};Tabletop.init=function(options){return new Tabletop(options)};Tabletop.sheets=function(){alert("Times have changed! You'll want to use var tabletop = Tabletop.init(...); tabletop.sheets(...); instead of Tabletop.sheets(...)")};Tabletop.prototype={fetch:function(callback){if(typeof callback!=="undefined")this.callback=callback;this.injectScript(this.base_json_url,this.loadSheets)},injectScript:function(url,callback){var script=document.createElement("script"),self=this,callbackName="tt"+ +new Date+Math.floor(Math.random()*1E5);Tabletop.callbacks[callbackName]=function(){var args=Array.prototype.slice.call(arguments,0);callback.apply(self,args);script.parentNode.removeChild(script);delete Tabletop.callbacks[callbackName]};url=url+"&callback="+"Tabletop.callbacks."+callbackName;script.src=url;document.getElementsByTagName("script")[0].parentNode.appendChild(script)},isWanted:function(sheetName){if(this.wanted.length===0)return true;else return this.wanted.indexOf(sheetName)!=-1},data:function(){if(this.model_names.length===0)return undefined;if(this.simpleSheet){if(this.model_names.length>1&&this.debug)console.debug("WARNING You have more than one sheet but are using simple sheet mode! Don't blame me when something goes wrong.");return this.models[this.model_names[0]].all()}else return this.models},addWanted:function(sheet){if(this.wanted.indexOf(sheet)==-1)this.wanted.push(sheet)},loadSheets:function(data){var i,ilen;var toInject=[];for(i=0,ilen=data.feed.entry.length;i<ilen;i++)if(this.isWanted(data.feed.entry[i].content.$t)){var sheet_id=data.feed.entry[i].link[3].href.substr(data.feed.entry[i].link[3].href.length-3,3);var json_url="https://spreadsheets.google.com/feeds/list/"+this.key+"/"+sheet_id+"/public/values?alt=json-in-script&sq="+this.query;this.log(json_url);toInject.push(json_url)}this.sheetsToLoad=toInject.length;for(i=0,ilen=toInject.length;i<ilen;i++)this.injectScript(toInject[i],this.loadSheet)},sheets:function(sheetName){if(typeof sheetName==="undefined")return this.models;else if(typeof this.models[sheetName]==="undefined")return;else return this.models[sheetName]},loadSheet:function(data){var model=new Tabletop.Model({data:data,parseNumbers:this.parseNumbers,postProcess:this.postProcess,tabletop:this});this.models[model.name]=model;if(this.model_names.indexOf(model.name)==-1)this.model_names.push(model.name);this.sheetsToLoad--;if(this.sheetsToLoad===0)this.doCallback()},doCallback:function(){if(this.sheetsToLoad===0)this.callback.apply(this.callbackContext||this,[this.data(),this])},log:function(msg){if(this.debug)if(typeof console!=="undefined"&&typeof console.log!=="undefined")Function.prototype.apply.apply(console.log,[console,arguments])}};Tabletop.Model=function(options){var i,j,ilen,jlen;this.column_names=[];this.name=options.data.feed.title.$t;this.elements=[];this.raw=options.data;if(typeof options.data.feed.entry==="undefined"){options.tabletop.log("Missing data for "+this.name+", make sure you didn't forget column headers");this.elements=[];return}for(var key in options.data.feed.entry[0])if(/^gsx/.test(key))this.column_names.push(key.replace("gsx$",""));for(i=0,ilen=options.data.feed.entry.length;i<ilen;i++){var source=options.data.feed.entry[i];var element={};for(var j=0,jlen=this.column_names.length;j<jlen;j++){var cell=source["gsx$"+this.column_names[j]];if(options.parseNumbers&&cell.$t!==""&&!isNaN(cell.$t))element[this.column_names[j]]=+cell.$t;else element[this.column_names[j]]=cell.$t}if(element.rowNumber===undefined)element.rowNumber=i+1;if(options.postProcess)options.postProcess(element);this.elements.push(element)}};Tabletop.Model.prototype={all:function(){return this.elements},toArray:function(){var array=[],i,j,ilen,jlen;for(i=0,ilen=this.elements.length;i<ilen;i++){var row=[];for(j=0,jlen=this.column_names.length;j<jlen;j++)row.push(this.elements[i][this.column_names[j]]);array.push(row)}return array}}})(this);
/* webcam.js */
var makeLivestream=function(target){var BaseURL="http://onsite.popright.in:8000/";var DisplayWidth="640";var DisplayHeight="480";var File="axis-cgi/mjpg/video.cgi?resolution=640x480";var output="";if(navigator.appName=="Microsoft Internet Explorer"&&navigator.platform!="MacPPC"&&navigator.platform!="Mac68k"){output='<OBJECT ID="Player" width=';output+=DisplayWidth;output+=" height=";output+=DisplayHeight;output+=' CLASSID="CLSID:DE625294-70E6-45ED-B895-CFFA13AEB044" ';output+='CODEBASE="';output+=BaseURL;output+='activex/AMC.cab#version=3,32,31,0">';output+='<PARAM NAME="MediaURL" VALUE="';output+=BaseURL;output+=File+'">';output+='<param name="MediaType" value="mjpeg-unicast">';output+='<param name="ShowStatusBar" value="0">';output+='<param name="ShowToolbar" value="0">';output+='<param name="AutoStart" value="1">';output+='<param name="StretchToFit" value="1">';output+="<BR><B>Axis Media Control</B><BR>";output+="The AXIS Media Control, which enables you ";output+="to view live image streams in Microsoft Internet";output+=" Explorer, could not be registered on your computer.";output+="<BR></OBJECT>"}else{theDate=new Date;output='<IMG SRC="';output+=BaseURL;output+=File;output+="&dummy="+theDate.getTime().toString(10);output+='" HEIGHT="';output+=DisplayHeight;output+='" WIDTH="';output+=DisplayWidth;output+='" class="webcam-image">'}output+='<img class="webcam-fallback" src="images/sad_camera.png">';document.getElementById(target).innerHTML=output};
/* bio-data.js */
Tabletop.init({key:"0AnPxd5MoDKC8dEhETDdWcXh5Z0tPWkhMV1UwME9jc1E",callback:loadInfo,simpleSheet:true});var bios={};function loadInfo(data,tabletop){for(var i=0;i<data.length;i++){var key=data[i]["netid"];delete data[i]["rowNumber"];delete data[i]["netid"];bios[key]=data[i];var linkArray={};var original=bios[key]["links"];var links=original.split(";");for(var j=0;j<links.length;j++){var link=links[j].split("$");linkArray[link[0]]=link[1]}bios[key]["links"]=linkArray}};
/* bios.js */
var imageBaseURL="images/people/";function writeBio(netID){var info=bios[netID];info["photo"]=imageBaseURL+netID+".jpg";var payload,target;for(key in info){if(key=="photo")payload='<img src="'+info[key]+'">';else if(key=="links"){payload="";var first=true;for(keykey in info[key]){if(!first)payload+="<li>|</li>";else first=false;payload+='<li><a href="'+info[key][keykey]+'">'+keykey+"</a></li>"}}else payload=info[key];target="#bio-"+key;$(target).html(payload)}};
/* tumblr.js */
function tumblrData(data){var first=true;var insert="";for(i=0;i<2;i++){if(i>0)first=false;var body=data.response.posts[i].body;var im_start=body.indexOf('src="')+5;var im_end=body.indexOf('"',im_start);var img=body.substring(im_start,im_end);body=body.replace(/<(?:.|\n)*?>/gm,"");var bod_end=body.indexOf(" ",175);if(body[bod_end-1]=="."||body[bod_end-1]=="!"||body[bod_end-1]=="?"||body[bod_end-1]==",")bod_end=body.indexOf(" ",bod_end+1);body=body.substring(0,bod_end)+"...";var divider=first?"":"<hr />";insert+=divider+'<div class="row recent-event"><div class="four columns"><a href="'+data.response.posts[i].post_url+'"><img class="radius" src="'+img+'"></a></div><div class="eight columns"><a href="'+data.response.posts[i].post_url+'"><h5>'+data.response.posts[i].title+"</h5></a>"+body+'<a class="see-more" href="'+data.response.posts[i].post_url+'">Read more</a></div></div>'}$("#tumblr-container").html(insert)};
/* app.js */
(function($,window,undefined){var $doc=$(document),Modernizr=window.Modernizr;$(document).ready(function(){$.fn.foundationAlerts?$doc.foundationAlerts():null;$.fn.foundationButtons?$doc.foundationButtons():null;$.fn.foundationAccordion?$doc.foundationAccordion():null;$.fn.foundationNavigation?$doc.foundationNavigation():null;$.fn.foundationTopBar?$doc.foundationTopBar():null;$.fn.foundationCustomForms?$doc.foundationCustomForms():null;$.fn.foundationMediaQueryViewer?$doc.foundationMediaQueryViewer():null;$.fn.foundationTabs?$doc.foundationTabs({callback:$.foundation.customForms.appendCustomMarkup}):null;$.fn.foundationTooltips?$doc.foundationTooltips():null;$.fn.foundationMagellan?$doc.foundationMagellan():null;$.fn.foundationClearing?$doc.foundationClearing():null;$.fn.placeholder?$("input, textarea").placeholder():null});if(Modernizr.touch&&!window.location.hash)$(window).load(function(){setTimeout(function(){window.scrollTo(0,1)},0)});$(document).ready(function(){var email_check=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,6}$/i;$("#nav-trigger").click(function(e){e.preventDefault();e.stopPropagation();$("#mobile-nav").addClass("active")});$("html").click(function(e){$("#mobile-nav").removeClass("active")});$("#menucontainer").click(function(event){event.stopPropagation()});$("#nav-close-trigger").click(function(e){e.preventDefault();$("#mobile-nav").removeClass("active")});$("a.mobile").click(function(e){$("#mobile-nav").removeClass("active")});$(".launch-join-modal").click(function(e){e.preventDefault();$("#join-modal").reveal()});$(".bio-link").click(function(e){e.preventDefault();$("#bio-modal").reveal({open:writeBio($(this).attr("data-bio"))})});$("a.scroll").click(function(e){e.preventDefault();$(".reveal-modal").trigger("reveal:close");var target=$(this).attr("href");$("html, body").animate({scrollTop:$(target).offset().top},750)});$("a.livestream-trigger").click(function(e){e.preventDefault();$("#livestream-modal").reveal({open:makeLivestream("livestream-container")})});$("#contact-submit").click(function(e){e.preventDefault();var submit=true;if($("#ctc-fm-name").val()==""){$("#ctc-fm-name").addClass("error");$("#ctc-fm-name-lbl").addClass("error");submit=false}else{$("#ctc-fm-name").removeClass("error");$("#ctc-fm-name-lbl").removeClass("error")}if(!email_check.test($("#ctc-fm-email").val())){$("#ctc-fm-email").addClass("error");$("#ctc-fm-email-lbl").addClass("error");submit=false}else{$("#ctc-fm-email").removeClass("error");$("#ctc-fm-email-lbl").removeClass("error")}if($("#ctc-fm-message").val()==""){$("#ctc-fm-message").addClass("error");$("#ctc-fm-message-lbl").addClass("error");submit=false}else{$("#ctc-fm-message").removeClass("error");$("#ctc-fm-message-lbl").removeClass("error")}var data_string="type=message"+"&name= "+$("#ctc-fm-name").val()+"&email="+$("#ctc-fm-email").val()+"&message="+$("#ctc-fm-message").val()+"&join="+$("#ctc-fm-join").val();if(submit)$.ajax({type:"POST",url:"form.php",data:data_string,beforeSend:function(){$("#ctc-fm-msg").html('<img src="images/ajax-loader.gif">')},success:function(data){if(data.success)$("#ctc-fm-msg").html("Message sent. :) ");else $("#ctc-fm-msg").html(""+data.error)}})});$("#list-fm-submit").click(function(e){e.preventDefault();var email=$("#list-fm-email").val();var submit=true;if(!email_check.test(email)){$("#list-fm-email").addClass("error");$("#list-fm-email-lbl").addClass("error");submit=false}else{$("#list-fm-email").removeClass("error");$("#list-fm-email-lbl").removeClass("error")}var data_string="type=join"+"&email="+email;if(submit)$.ajax({type:"POST",url:"form.php",data:data_string,beforeSend:function(){$("#list-fm-msg").html('<img src="images/ajax-loader.gif">')},success:function(data){if(data.success)$("#list-fm-msg").html(data.email+" successfully joined the listserv. Prepare to be notified about some really cool events!");else $("#list-fm-msg").html(""+data.error)}})})})})(jQuery,this);